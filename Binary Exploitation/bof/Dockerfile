FROM ubuntu:20.04

RUN apt update -y

# non-interactive
RUN apt install locales
RUN locale-gen en_US.UTF-8
ENV LANG en_US.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8
ENV DEBIAN_FRONTEND noninteractive

RUN apt install -y build-essential libcunit1-dev libudev-dev socat

COPY src/ /app
RUN chown -R root:root /app
RUN chmod -R 555 /app

WORKDIR /app
RUN useradd ctf
EXPOSE 8000

ENTRYPOINT ["./run.sh"]